\section{Описание проекта}
\subsection{Разработка дизайна}
Так как я не дизайнер, то мне нужно оперировать концептами и эскизами интерфейса. Поэтому вначале я сделал макет страниц и связь между ними.

\subsection{Авторизации через \acrfull{jwt}}

\subsubsection{Авторизация}
\textbf{Авторизация} --- это процесс предоставления определённому лицу или группе лиц прав на выполнение определённых действий. Также сюда входит проверка данных, прав при попытке выполнения этих действий.

\subsubsection{Аутентификация}
\textbf{Аутентификация} --- процедура проверки подлинности данный.

\subsubsection{\acrfull{jwt}}
\begin{figure}[h!]
    \begin{center}
        \includegraphics[scale=0.4]{images/jwt-example.eps}
        \caption{Демонстрация работы \acrshort{jwt}}
    \end{center}
\end{figure}

\textbf{\acrfull{jwt}} --- это открытый стандарт \href{https://tools.ietf.org/html/rfc7519}{(RFC 7519)}, который определяет способ для безопасной передачи информации между сторонами с помощью \acrshort{json} объектов. Эту информацию можно проверить, потому что она имеет цифровую подпись.

Вот несколько сценариев, в которых полезен \acrshort{jwt}:
\begin{itemize}
    \item \textbf{Авторизация} --- это наиболее распространенный сценарий использования \acrshort{jwt}. После того, как пользователь вошел в систему, каждый последующий запрос будет включать \acrshort{jwt}, позволяя пользователю получать доступ к маршрутам, службам и ресурсам, разрешенным с помощью этого токена.
    \item \textbf{Обмен информацией} --- \acrshort{jwt} хороший способ безопасной передачи информации между сторонами. Поскольку \acrshort{jwt} могут быть подписаны, например, с использованием пар открытого и закрытого ключей, вы можете быть уверены, что отправители являются теми, кем они себя называют. Кроме того, поскольку подпись рассчитывается с использованием \textbf{заголовка} и \textbf{полезных данных}, вы также можете убедиться, что содержимое не было изменено.
\end{itemize}

\acrshort{jwt} состоит из следующих частей:
\begin{itemize}
    \item \textbf{Заголовок} ---  содержит информацию о том, как должна вычисляться подпись. Обычно состоит из двух частей: типа токена, которым является \acrshort{jwt}, и используемого алгоритма подписи, такого как HMAC SHA256 или RSA.
    \item \textbf{Полезные данные} --- это данные, которые хранятся внутри \acrshort{jwt}. Они также называют JWT-claims (заявки). Список доступных полей для \acrshort{jwt} доступен на \href{https://en.wikipedia.org/wiki/JSON_Web_Token#Standard_fields}{Wiki}.
    \item \textbf{Подпись} --- используется для проверки того, что сообщение не было изменено в процессе. В компактной форме \acrshort{jwt} является сторой, которая состоит из трех частей, разделенных точками. Псевдокод вычисления подписи:
    \begin{noerr}
    \begin{minted}{js}
SECRET_KEY = 'some string';
unsignedToken = encodeBase64Url(header) + '.' + encodeBase64Url(payload)
signature = SHA256(unsignedToken, SECRET_KEY);

// собираем всё вместе
jwt = encodeBase64Url(header) + '.' + encodeBase64Url(payload) + '.' + encodeBase64Url(signature);
    \end{minted}
    \end{noerr}
\end{itemize}

\subsubsection{Реализация}
Авторизация проходит следущим образом:
\begin{enumerate}
    \item Пользователь делает \mintinline{text}{POST /api/signup} запрос на регистрацию. Если всё нормально, то в базе данных создаётся запись с данными пользователя.
    \item Пользователь делает \mintinline{text}{POST /api/signin} запрос на аутентификацию. Если данные верные, то высылается \acrshort{jwt} вместе с состоянием пользователя (логин, почта). Когда ответ с сервера получен, то \acrshort{jwt} сохраняется в localStorage (долговременное хранилище), а состояние передается в глобальное \textcite{redux} хранилище.
    \item После того, как состояние глобального хранилища обновилось, приложение обновляет интерфейс.
\end{enumerate}

Если перезагрузить веб-страницу, то \textcite{redux} хранилище обнуляется. Поэтому нам нужно сделать следующее: при запуске приложения проверять на валидность JWT, который лежит в localStorage. Это делается через \mintinline{text}{POST /api/init} запрос. Если токен валидный, то переавторизовываем пользователя. Иначе перенаправляем на главную страницу.

Далее этот токет будет использоваться для доступа к защищёнными ресурсам.

\subsection{Схема базы данных}
\begin{figure}[h!]
    \begin{center}
        \includegraphics[scale=0.6]{images/db_scheme.eps}
    \end{center}
    \caption{Схема базы данных}
\end{figure}

\clearpage